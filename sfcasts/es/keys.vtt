WEBVTT

00:00:01.066 --> 00:00:03.326 align:middle
¡Estamos casi listos para
empezar a traducir este sitio!

00:00:03.596 --> 00:00:05.036 align:middle
Pero antes de empezar, quiero

00:00:05.036 --> 00:00:07.996 align:middle
mostrarte un pequeño y diminuto problema
con nuestra configuración hasta ahora.

00:00:08.466 --> 00:00:09.816 align:middle
Todavía tenemos este texto "¡Hola Mundo!

00:00:09.816 --> 00:00:10.726 align:middle
así que salta

00:00:10.726 --> 00:00:15.056 align:middle
a templates/article/index.html.twig
donde lo estamos traduciendo.

00:00:15.506 --> 00:00:19.866 align:middle
Recuerda que tenemos la traducción al francés
de esta configuración en messages.fr.yaml...

00:00:20.536 --> 00:00:23.946 align:middle
Supongamos que ya no queremos "gritar" esto,
así que elimina el signo de exclamación:

00:00:23.946 --> 00:00:26.576 align:middle
Prefiero gritar esto, pero a
los mandamases no les gusta.

00:00:27.156 --> 00:00:28.186 align:middle
¿Ves el problema?

00:00:28.696 --> 00:00:30.596 align:middle
Ve a la página principal
en inglés y actualízala.

00:00:31.066 --> 00:00:33.736 align:middle
Vale, vemos "Hello World"
sin el signo de exclamación.

00:00:34.056 --> 00:00:35.186 align:middle
Pero cambiamos al francés...

00:00:35.486 --> 00:00:38.456 align:middle
hemos roto la traducción,
¡está volviendo al inglés!

00:00:39.076 --> 00:00:44.496 align:middle
Por supuesto, la solución podría ser actualizar la clave en
messages.fr.yaml para que coincida con la versión inglesa...

00:00:44.786 --> 00:00:49.296 align:middle
Pero, es un poco molesto que un pequeño cambio
de puntuación pueda romper nuestras traducciones.

00:00:49.776 --> 00:00:53.996 align:middle
Una práctica habitual es utilizar claves
de traducción en lugar del texto real.

00:00:54.556 --> 00:00:57.216 align:middle
Son una especie de claves de
caché para tus traducciones.

00:00:57.506 --> 00:01:04.276 align:middle
Así, en lugar de Hello World en index.html.twig,
utiliza una versión con clave: hello_world.

00:01:04.946 --> 00:01:09.326 align:middle
Pero... si ahora actualizas la página en
inglés, sólo mostrará este texto con clave.

00:01:09.806 --> 00:01:11.986 align:middle
Necesitamos un nuevo archivo de
traducciones para el inglés.

00:01:12.416 --> 00:01:18.026 align:middle
En la carpeta translations/, crea un
nuevo archivo messages.en.yaml, y dentro,

00:01:18.026 --> 00:01:25.216 align:middle
añade hello_world: "Hello World": Si ahora
actualizas la página, vuelve a funcionar.

00:01:25.746 --> 00:01:28.466 align:middle
En la página en francés,
está volviendo al inglés.

00:01:28.796 --> 00:01:31.586 align:middle
Arréglalo abriendo messages.fr.yaml,

00:01:31.756 --> 00:01:36.216 align:middle
cambia la clave a hello_world: Vuelve
a nuestra aplicación y actualiza.

00:01:36.746 --> 00:01:37.966 align:middle
Ahora ya funciona.

00:01:38.376 --> 00:01:42.256 align:middle
Hay que admitir que el uso de claves supone un
poco más de trabajo, pero a la larga compensa.

00:01:42.986 --> 00:01:49.136 align:middle
Limpia nuestro código de pruebas eliminando todo
lo que haya en messages.fr.yaml y messages.en.yaml.

00:01:49.656 --> 00:01:53.896 align:middle
En index.html.twig, elimina
la traducción de hello_world.

00:01:54.876 --> 00:01:57.846 align:middle
Volvemos a nuestra página de
inicio en inglés, ¡perfecto!

00:01:57.986 --> 00:01:59.006 align:middle
Tenemos una pizarra limpia.

00:01:59.606 --> 00:02:02.896 align:middle
Ahora, por fin, ¡podemos empezar
a traducir este sitio de verdad!

00:02:03.386 --> 00:02:04.886 align:middle
Empieza por "Asteroides Locales".

00:02:05.416 --> 00:02:10.136 align:middle
En base.html.twig, busca el elemento del
menú con el texto "Asteroides Locales".

00:02:10.646 --> 00:02:13.216 align:middle
Selecciona este texto y córtalo,
para que esté en tu portapapeles.

00:02:13.996 --> 00:02:15.926 align:middle
Tenemos que inventar una clave para esto...

00:02:16.256 --> 00:02:20.286 align:middle
Las claves pueden ser cualquier cosa única,
así que podríamos utilizar local_asteroids,

00:02:20.606 --> 00:02:23.486 align:middle
pero una lista plana enorme puede
resultar confusa y difícil de trabajar.

00:02:24.226 --> 00:02:27.506 align:middle
Las claves pueden dividirse en espacios
de nombres, separados por un punto.

00:02:27.846 --> 00:02:31.556 align:middle
Así que podríamos utilizar
quizás, menu.local_asteroids.

00:02:32.096 --> 00:02:34.266 align:middle
Esto es mejor, pero sigue
siendo un poco genérico.

00:02:34.736 --> 00:02:39.366 align:middle
Lo que me gusta hacer es nombrar mis espacios de nombres
en función del contexto en el que se utiliza el texto.

00:02:39.786 --> 00:02:46.526 align:middle
En este caso, el texto está en base.html.twig,
así que utiliza base.local_asteroids.

00:02:46.996 --> 00:02:51.396 align:middle
No olvides añadir |trans: Si este texto
traducido estuviera en un controlador,

00:02:51.426 --> 00:02:55.086 align:middle
podrías utilizar una versión abreviada del nombre de
la clase del controlador o incluso del nombre de la ruta.

00:02:55.556 --> 00:02:57.986 align:middle
Lo mejor es encontrar una buena
convención, ¡y ceñirse a ella!

00:02:57.986 --> 00:03:02.666 align:middle
¿Qué pasa si hay varias claves
únicas con el mismo texto?

00:03:03.106 --> 00:03:05.386 align:middle
Sinceramente, no me
preocupo demasiado por esto.

00:03:05.626 --> 00:03:08.946 align:middle
La mayoría de los servicios de traducción
no cobran un suplemento por texto duplicado

00:03:09.196 --> 00:03:12.696 align:middle
, y esta convención me parece más
importante que la unicidad del texto.

00:03:13.416 --> 00:03:17.356 align:middle
Tenemos el nombre de nuestra clave y el texto en el
portapapeles, así que vamos a añadir la traducción

00:03:17.356 --> 00:03:21.266 align:middle
a messages.en.yaml, nuestro archivo
de traducción al inglés por ahora.

00:03:21.946 --> 00:03:24.916 align:middle
Podemos añadir las claves como
una lista plana, como con base.

00:03:24.916 --> 00:03:29.436 align:middle
pero... Como estamos utilizando YAML como
formato, ¡podemos utilizar la sangría

00:03:29.436 --> 00:03:32.396 align:middle
para crear los espacios de nombres
como forma de agruparlos visualmente!

00:03:33.026 --> 00:03:35.886 align:middle
La mayoría de los demás formatos de
archivo de traducción no admiten esto,

00:03:36.086 --> 00:03:38.786 align:middle
por eso los desarrolladores
prefieren YAML para las traducciones.

00:03:39.416 --> 00:03:45.346 align:middle
Añade base:, nueva línea,
sangría, y añade local_asteroids:.

00:03:45.556 --> 00:03:50.296 align:middle
Luego, entre comillas, pega "Asteroides Locales":
Volvemos a nuestra aplicación, actualizamos...

00:03:50.406 --> 00:03:51.836 align:middle
Y... ¡Bah!

00:03:52.116 --> 00:03:53.426 align:middle
¡Tenemos una errata en nuestra clave!

00:03:54.226 --> 00:03:59.826 align:middle
En base.html.twig, el plugin Symfony de PhpStorm
incluso resalta esta clave con una advertencia.

00:04:00.366 --> 00:04:03.126 align:middle
Borra el texto después
de _ y ¡comprueba esto!

00:04:03.386 --> 00:04:05.796 align:middle
¡PhpStorm está auto-sugiriendo
la clave correcta!

00:04:06.186 --> 00:04:08.056 align:middle
Arréglalo, actualiza la página...

00:04:08.676 --> 00:04:09.866 align:middle
y listo, ¡funciona!

00:04:10.366 --> 00:04:15.406 align:middle
Me gusta mucho este proceso de traducir texto: uno
a uno, encuentra el texto que quieres traducir,

00:04:15.646 --> 00:04:19.386 align:middle
córtalo, inventa una clave,
añade el filtro |trans, y luego,

00:04:19.656 --> 00:04:23.906 align:middle
en tu archivo de traducción del idioma por
defecto, añade la clave y pega el texto.

00:04:24.596 --> 00:04:28.336 align:middle
A continuación, ¡vamos a ver cómo manejar la
traducción de texto con contenido dinámico!
